<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
    <!--    <link rel="stylesheet" href="css/responsive-attributes.css">-->

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&display=swap" rel="stylesheet">

    <meta name="description" content="">

    <meta property="og:title" content="Is Your Evening Commute Disrupted?">
    <meta property="og:description" content="The Winnipeg Goldeyes sporadically close the best north-south bicycle route across downtown, with no signed notice. “Safe” detours add 15–20 minutes through dangerous intersections.">
    <meta property="og:image" content="https://goldeyesfireworks.com/meta/og/banner.png">
    <meta property="og:url" content="https://goldeyesfireworks.com">
    <meta property="og:type" content="article">

    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icon.png">

    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#fafafa">

    <style>
        .debug {
            display: none;
        }

        #animated-figure-route-west, #animated {
            height: 90vh;
            scroll-snap-align: start;
            scroll-snap-stop: normal;
            scroll-snap-type: both mandatory;
        }

        .path {
            stroke-dasharray: 150;
            stroke-dashoffset: 150;
            animation: dash 10s linear normal infinite;
        }

        @keyframes dash {
            0% {
                stroke-dashoffset: 150;
            }
            15% {
                stroke-dashoffset: 130;
            }
            25% {
                stroke-dashoffset: 126;
            }
            35% {
                stroke-dashoffset: 124;
            }
            40% {
                stroke-dashoffset: 120;
            }
            100% {
                stroke-dashoffset: 0;
            }
        }
    </style>
</head>

<body>

<!-- Add your site or application content here -->
<main>
    <article class="announce">
        <h1 id="question">Are the Goldeyes Closing Waterfront Drive Today?</h1>
        <div id="answer">
            <p>No, Waterfront Drive is <em>open</em> today.</p>
            <p id="next">There are no more scheduled fireworks for the 2024 season.</p>
        </div>
    </article>


    <article class="explanation">
        <h2>Why does this matter?</h2>
        <p>
            <strong>
                Your evening commute will be ruined.
            </strong>
            The Goldeyes close down Waterfront Drive
            to foot, bicycle, and vehicle traffic
            starting from the beginning of evening rush hour
            all the way till after the fireworks.
        </p>
        <p>
            <strong>
                Imagine driving home and a bridge were suddenly closed during rush hour.
                No signage, no warning.
            </strong>
            The nearest safe routes add 20 minutes to your journey and
            take you through different neighbourhoods, if you can find them.
        </p>
        <p>
            <strong>
                There are no signed detours.
            </strong>
            You're just left to figure it out.
        </p>
        <p>
            <strong>There is no advanced signage.</strong>
            Parades, marathons, street fairs?
            You get days’ worth of posted signs,
            advising you of the upcoming disruption.
        </p>
        <p>
            <strong>
                The safe, unsigned detour takes you through
                the most dangerous intersection in Winnipeg.
            </strong>
            Yes, it’s Assiniboine Ave and Main St,
            where
            <a href="media/dangerous.pdf#page=8">
                30% of left-turning drivers run the red light through the crosswalk.
            </a>
            <br>
        <blockquote>
            The involvement rate in high risk left-turn conflicts
            was <em>six times higher</em>
            than the benchmark rate for permissive left turn movements
            on urban arterials in North America.
        </blockquote>

        </p>

    </article>

    <article class="diagrams">
        <h2>I’m more of a visual learner</h2>

        <p>
            Me too. I’ve got you.
        </p>

        <figure id="figure-route-obstruction">
            <figcaption>
                <strong>
                    The Goldeyes run barriers from the ballpark all the way down to the river.
                </strong>
            </figcaption>

            <picture>
                <source srcset="images/obstruction-small.svg" media="(max-width: 800px)" width="348" height="478" />
                <img src="images/obstruction-large.svg" />
            </picture>
            <!--
            <svg
                    viewBox="0 0 348 478"
                    xmlns="http://www.w3.org/2000/svg"
                    class="sm"
            >
                <defs>
                    <pattern
                            id="exclusion-hatch"
                            x="0" y="0" width="20" height="20"
                            patternUnits="userSpaceOnUse"
                            patternTransform="rotate(30)"
                    >
                        <line
                                x1="10" x2="10" y1="0" y2="20"
                                stroke-width="4" stroke="red"
                        />
                    </pattern>
                    <filter id="drop-shadow" width="120" height="120">
                        <feOffset in="SourceGraphic" dx="3" dy="3"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.3"/>
                        </feComponentTransfer>
                        <feColorMatrix type="matrix" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"/>
                        <feGaussianBlur stdDeviation="2"/>
                        <feBlend in="SourceGraphic" in2="blurOut"/>
                    </filter>
                </defs>
                <image
                        href="images/obstruction-base-small.png"
                        width="348" height="478"
                        preserveAspectRatio="xMidyMid"
                />
                <g id="exclusion">
                    <path
                            class="exclusion"
                            d="m 180,120 47,-22 90,170 -95,10 -15,-7 15,-45
                           c 0,0 20,-50 -20,-90
                           z"
                            fill="url(#exclusion-hatch)"
                            filter="url(#drop-shadow)"

                    />
                </g>
            </svg>

            <svg
                    viewBox="0 0 629 868"
                    xmlns="http://www.w3.org/2000/svg"
                    class="lg"
            >
                <defs>
                    <pattern
                            id="exclusion-hatch"
                            x="0" y="0" width="20" height="20"
                            patternUnits="userSpaceOnUse"
                            patternTransform="rotate(30)"
                    >
                        <line
                                x1="10" x2="10" y1="0" y2="20"
                                stroke-width="4" stroke="red"
                        />
                    </pattern>
                    <filter id="drop-shadow" width="120" height="120">
                        <feOffset in="SourceGraphic" dx="3" dy="3"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.3"/>
                        </feComponentTransfer>
                        <feColorMatrix type="matrix" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"/>
                        <feGaussianBlur stdDeviation="2"/>
                        <feBlend in="SourceGraphic" in2="blurOut"/>
                    </filter>
                </defs>
                <image
                        href="images/obstruction-base-big.png"
                        width="629" height="868"
                        preserveAspectRatio="xMidyMid"
                />
                <g id="exclusion" transform="scale(1.8) translate(-20,-30)">
                    <path
                            class="exclusion"
                            d="m 180,120 47,-22 100,170 -100,10 -15,-7 15,-45
                           c 0,0 20,-50 -20,-90
                           z"
                            fill="url(#exclusion-hatch)"
                            filter="url(#drop-shadow)"

                    />
                </g>
            </svg>
            -->
        </figure>

        <figure id="puzzle">
            <figcaption>
                <strong>
                    Here’s a puzzle for you.
                </strong>
                You want to take that green north-south route,
                but you can’t go past the red fireworks zone.
                Can you find a safe detour using only blue or green routes?
            </figcaption>
            <svg
                    viewBox="0 0 1000 1000"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <defs>
                    <pattern
                            id="exclusion-hatch"
                            x="0" y="0" width="20" height="20"
                            patternUnits="userSpaceOnUse"
                            patternTransform="rotate(30)"
                    >
                        <line
                                x1="10" x2="10" y1="0" y2="20"
                                stroke-width="6" stroke="#ca3339"
                        />
                    </pattern>
                    <filter id="drop-shadow" width="120" height="120">
                        <feOffset in="SourceGraphic" dx="5" dy="5"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.3"/>
                        </feComponentTransfer>
                        <feColorMatrix type="matrix" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"/>
                        <feGaussianBlur stdDeviation="2"/>
                        <feBlend in="SourceGraphic" in2="blurOut"/>
                    </filter>
                </defs>
                <image
                        href="images/official-bike-map.png"
                        width="930" height="987"
                        preserveAspectRatio="xMidyMid"
                />
                <g id="exclusion">
                    <circle
                            id="exclusion-circle"
                            r="50" cx="380" cy="540"
                            fill="url(#exclusion-hatch)"
                            filter="url(#drop-shadow)"
                            stroke="#ca3339"
                            stroke-width="8px"
                    />
                </g>
            </svg>
        </figure>
        

        <figure id="animated-figure-route-west">
            <figcaption>
                <strong>The closest, safe north-south path is Garry Street.</strong>
                You have backtrack through the Forks (again).
                Cross over Main Street at Assiniboine Avenue,
                keeping your eyes peeled for dangerous, law-breaking drivers.
                Head north along Garry Street.
                Navigate the wiggledy route through the Exchange District,
                crossing over Main Street again,
                before continuing on your way.
            </figcaption>

            <svg viewBox="0 0 816 1000" id="animated">

                <defs>
                    <pattern
                            id="exclusion-hatch"
                            x="0" y="0" width="20" height="20"
                            patternUnits="userSpaceOnUse"
                            patternTransform="rotate(30)"
                    >
                        <line
                                x1="10" x2="10" y1="0" y2="20"
                                stroke-width="4" stroke="red"
                        />
                    </pattern>
                    <filter id="drop-shadow" width="120" height="120">
                        <feOffset in="SourceGraphic" dx="3" dy="3"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.3"/>
                        </feComponentTransfer>
                        <feColorMatrix type="matrix" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"/>
                        <feGaussianBlur stdDeviation="2"/>
                        <feBlend in="SourceGraphic" in2="blurOut"/>
                    </filter>
                </defs>



                <image href="images/route-west-base.png" width="816" height="1217" />

                <path
                    class="path"
                    stroke="#ff00ff"
                    stroke-width="8"
                    fill="none"
                    pathLength="100"
                    filter="url(#drop-shadow)"

                    d="
                        M 540,1000
                        L 518,950
                        C 489,885 536,920 550,918
                        C 576,923 571,898 560,854
                        C 531,764 568,790 592,811
                        C 637,831 631,769 666,785
                        C 734,792 678,682 724,665
                        C 764,633 708,554 652,495
                        C 637,475 627,483 645,505
                        C 777,699 719,600 692,693
                        C 704,820 639,747 630,780
                        C 598,842 549,717 536,812
                        C 572,919 533,908 508,896
                        C 472,865 443,876 443,887
                        L 343,939
                        L 100,239
                        L 78,229
                        L 131,133
                        L 167,149
                        L 232,150
                        L 290,143
                        L 446,204
                        C 504,217 540,171 519,116
                        S 558,67 546,0
            "
                    />


                <g id="exclusion" transform="translate(337,206)">
                    <path
                            class="exclusion"
                            d="m 180,120 47,-22 90,170 -95,10 -15,-7 15,-45
                           c 0,0 20,-50 -20,-90
                           z"
                            fill="url(#exclusion-hatch)"
                            filter="url(#drop-shadow)"
                            stroke="#ca3339"
                            stroke-width="6px"

                    />
                </g>

                    <circle class="debug" id="c1" cx="29" cy="2" r="5" fill="blue" stroke="black" />
                    <circle class="debug" id="c2" cx="550" cy="918" r="5" fill="#9aa0ea" stroke="black"/>
                    <circle class="debug" id="c3" cx="536" cy="920" r="5" fill="red" stroke="black" />

            </svg>
            <p class="debug" id="location">Loc</p>
        </figure>

    </article>
    <aside class="credit">
        <p>
        Map data from <a href="https://www.openstreetmap.org/copyright/">OpenStreetMap</a> and City of Winnipeg.
        </p>
    </aside>
</main>
<script src="js/index.js"></script>


<script>
    svg = document.getElementById('animated');
    pt = svg.createSVGPoint()

    function cursorPoint(evt) {
        pt.x = evt.clientX;
        pt.y = evt.clientY;
        return pt.matrixTransform(svg.getScreenCTM().inverse());
    }


    locEl = document.getElementById("location")
    svg.addEventListener('mousemove', function(evt) {
        let loc = cursorPoint(evt);
        console.log(loc.x, loc.y);
        // round to nearest 1
        locEl.innerText = `(${Math.round(loc.x)}, ${Math.round(loc.y)})`;
    });


    path = svg.querySelector('path')
    d = path.getAttribute('d')
    r = /C\s(\d+),(\d+)\s+(\d+),(\d+)\s+(\d+),(\d+)/g
    g = d.matchAll(r)
    a = Array.from(g)
    b = a[a.length - 1]


    c1 = document.createElement("circle")
    c1.setAttribute("fill", "blue")
    c1.setAttribute("stroke", "black")
    svg.appendChild(c1)
    c1.setAttribute("cx", b[1])
    c1.setAttribute("cy", b[2])

    c2 = document.getElementById("c2")
    c2.setAttribute("cx", b[3])
    c2.setAttribute("cy", b[4])

    c3 = document.getElementById("c3")
    c3.setAttribute("cx", b[5])
    c3.setAttribute("cy", b[6])


</script>

</body>

</html>
